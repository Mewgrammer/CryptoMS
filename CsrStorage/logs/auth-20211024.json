{"@t":"2021-10-24T16:36:27.5595079Z","@m":"Starting application...","@i":"777459a1"}
{"@t":"2021-10-24T16:36:28.1357432Z","@m":"'AddEntityFramework*' was called on the service provider, but 'UseInternalServiceProvider' wasn't called in the DbContext options configuration. Consider removing the 'AddEntityFramework*' call, as in most cases it's not needed and may cause conflicts with other products and services registered in the same service provider.","@i":"4bc25ac5","@l":"Warning","EventId":{"Id":10410,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.RedundantAddServicesCallWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Infrastructure"}
{"@t":"2021-10-24T16:36:28.6024432Z","@m":"Entity Framework Core \"6.0.0-rc.1.21452.10\" initialized '\"CsrDbContext\"' using provider '\"Npgsql.EntityFrameworkCore.PostgreSQL\":\"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06\"' with options: \"using snake-case naming  (culture=)DetailedErrorsEnabled \"","@i":"d2805559","version":"6.0.0-rc.1.21452.10","contextType":"CsrDbContext","provider":"Npgsql.EntityFrameworkCore.PostgreSQL","providerVersion":"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06","options":"using snake-case naming  (culture=)DetailedErrorsEnabled ","EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"SourceContext":"Microsoft.EntityFrameworkCore.Infrastructure"}
{"@t":"2021-10-24T16:36:28.8889530Z","@m":"Executed DbCommand (\"25\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');\"","@i":"0723d8ff","elapsed":"25","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:36:28.9061060Z","@m":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');\"","@i":"0723d8ff","elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:36:28.9234720Z","@m":"Executed DbCommand (\"3\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"SELECT migration_id, product_version\r\nFROM \\\"__EFMigrationsHistory\\\"\r\nORDER BY migration_id;\"","@i":"0723d8ff","elapsed":"3","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT migration_id, product_version\r\nFROM \"__EFMigrationsHistory\"\r\nORDER BY migration_id;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:36:28.9346346Z","@m":"No migrations were applied. The database is already up to date.","@i":"503cba9d","EventId":{"Id":20405,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationsNotApplied"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations"}
{"@t":"2021-10-24T16:36:29.3373315Z","@m":"Entity Framework Core \"6.0.0-rc.1.21452.10\" initialized '\"CsrDbContext\"' using provider '\"Npgsql.EntityFrameworkCore.PostgreSQL\":\"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06\"' with options: \"using snake-case naming  (culture=)DetailedErrorsEnabled \"","@i":"d2805559","version":"6.0.0-rc.1.21452.10","contextType":"CsrDbContext","provider":"Npgsql.EntityFrameworkCore.PostgreSQL","providerVersion":"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06","options":"using snake-case naming  (culture=)DetailedErrorsEnabled ","EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"SourceContext":"Microsoft.EntityFrameworkCore.Infrastructure"}
{"@t":"2021-10-24T16:36:29.4801638Z","@m":"Failed executing DbCommand (\"24\"ms) [Parameters=[\"@p0='?' (DbType = Guid), @p1='?' (DbType = DateTimeOffset), @p2='?', @p3='?' (DbType = DateTimeOffset)\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"INSERT INTO csrs (id, created_at, csr, updated_at)\r\nVALUES (@p0, @p1, @p2, @p3);\"","@i":"627a98df","@l":"Error","elapsed":"24","parameters":"@p0='?' (DbType = Guid), @p1='?' (DbType = DateTimeOffset), @p2='?', @p3='?' (DbType = DateTimeOffset)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"INSERT INTO csrs (id, created_at, csr, updated_at)\r\nVALUES (@p0, @p1, @p2, @p3);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:36:30.0613728Z","@m":"User profile is available. Using '\"C:\\Users\\Michael\\AppData\\Local\\ASP.NET\\DataProtection-Keys\"' as key repository and Windows DPAPI to encrypt keys at rest.","@i":"7ac5e29c","FullName":"C:\\Users\\Michael\\AppData\\Local\\ASP.NET\\DataProtection-Keys","EventId":{"Id":63,"Name":"UsingProfileAsKeyRepositoryWithDPAPI"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}
{"@t":"2021-10-24T16:36:30.1702045Z","@m":"An exception occurred in the database while saving changes for context type '\"CsrStorage.Data.CsrDbContext\"'.\"\r\n\"\"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \\\"ix_csrs_csr\\\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|211_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23505\r\n    MessageText: duplicate key value violates unique constraint \\\"ix_csrs_csr\\\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: csrs\r\n    ConstraintName: ix_csrs_csr\r\n    File: nbtinsert.c\r\n    Line: 663\r\n    Routine: _bt_check_unique\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\"","@i":"170f029e","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|211_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23505\r\n    MessageText: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: csrs\r\n    ConstraintName: ix_csrs_csr\r\n    File: nbtinsert.c\r\n    Line: 663\r\n    Routine: _bt_check_unique\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","contextType":"CsrStorage.Data.CsrDbContext","newline":"\r\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|211_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23505\r\n    MessageText: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: csrs\r\n    ConstraintName: ix_csrs_csr\r\n    File: nbtinsert.c\r\n    Line: 663\r\n    Routine: _bt_check_unique\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update"}
{"@t":"2021-10-24T16:36:30.2185008Z","@m":"Now listening on: \"http://localhost:5003\"","@i":"d826f4b8","address":"http://localhost:5003","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:36:30.2590732Z","@m":"Application started. Press Ctrl+C to shut down.","@i":"dcaefe54","SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:36:30.2595469Z","@m":"Hosting environment: \"Development\"","@i":"c3307c92","envName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:36:30.2597686Z","@m":"Content root path: \"C:\\Users\\Michael\\RiderProjects\\CryptoMS\\CsrStorage\"","@i":"b5d60022","contentRoot":"C:\\Users\\Michael\\RiderProjects\\CryptoMS\\CsrStorage","SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:37:10.8520536Z","@m":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","@i":"ca22a1cb","Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"localhost:5003","PathBase":"","Path":"/api/v1/csr/storage","QueryString":"","HostingRequestStartingLog":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HMCN1I3ED2ON:00000002","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1I3ED2ON"}
{"@t":"2021-10-24T16:37:10.8900562Z","@m":"Authorization failed. \"These requirements were not met:\r\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.\"","@i":"92d7f7d3","Reason":"These requirements were not met:\r\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.","EventId":{"Id":2,"Name":"UserAuthorizationFailed"},"SourceContext":"Microsoft.AspNetCore.Authorization.DefaultAuthorizationService","RequestId":"0HMCN1I3ED2ON:00000002","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1I3ED2ON"}
{"@t":"2021-10-24T16:37:10.9627847Z","@m":"AuthenticationScheme: \"Bearer\" was challenged.","@i":"d45f1f38","AuthenticationScheme":"Bearer","EventId":{"Id":12,"Name":"AuthenticationSchemeChallenged"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HMCN1I3ED2ON:00000002","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1I3ED2ON"}
{"@t":"2021-10-24T16:37:10.9743987Z","@m":"Request finished HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - - - 401 0 - 123.5859ms","@i":"791a596a","ElapsedMilliseconds":123.5859,"StatusCode":401,"ContentType":null,"ContentLength":0,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"localhost:5003","PathBase":"","Path":"/api/v1/csr/storage","QueryString":"","HostingRequestFinishedLog":"Request finished HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - - - 401 0 - 123.5859ms","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HMCN1I3ED2ON:00000002","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1I3ED2ON"}
{"@t":"2021-10-24T16:40:27.6811625Z","@m":"Starting application...","@i":"777459a1"}
{"@t":"2021-10-24T16:40:28.1705351Z","@m":"'AddEntityFramework*' was called on the service provider, but 'UseInternalServiceProvider' wasn't called in the DbContext options configuration. Consider removing the 'AddEntityFramework*' call, as in most cases it's not needed and may cause conflicts with other products and services registered in the same service provider.","@i":"4bc25ac5","@l":"Warning","EventId":{"Id":10410,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.RedundantAddServicesCallWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Infrastructure"}
{"@t":"2021-10-24T16:40:28.6253711Z","@m":"Entity Framework Core \"6.0.0-rc.1.21452.10\" initialized '\"CsrDbContext\"' using provider '\"Npgsql.EntityFrameworkCore.PostgreSQL\":\"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06\"' with options: \"using snake-case naming  (culture=)DetailedErrorsEnabled \"","@i":"d2805559","version":"6.0.0-rc.1.21452.10","contextType":"CsrDbContext","provider":"Npgsql.EntityFrameworkCore.PostgreSQL","providerVersion":"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06","options":"using snake-case naming  (culture=)DetailedErrorsEnabled ","EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"SourceContext":"Microsoft.EntityFrameworkCore.Infrastructure"}
{"@t":"2021-10-24T16:40:28.8963825Z","@m":"Executed DbCommand (\"28\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');\"","@i":"0723d8ff","elapsed":"28","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:40:28.9132579Z","@m":"Executed DbCommand (\"1\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');\"","@i":"0723d8ff","elapsed":"1","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:40:28.9282476Z","@m":"Executed DbCommand (\"3\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"SELECT migration_id, product_version\r\nFROM \\\"__EFMigrationsHistory\\\"\r\nORDER BY migration_id;\"","@i":"0723d8ff","elapsed":"3","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT migration_id, product_version\r\nFROM \"__EFMigrationsHistory\"\r\nORDER BY migration_id;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:40:28.9385483Z","@m":"No migrations were applied. The database is already up to date.","@i":"503cba9d","EventId":{"Id":20405,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationsNotApplied"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations"}
{"@t":"2021-10-24T16:40:29.2527974Z","@m":"Entity Framework Core \"6.0.0-rc.1.21452.10\" initialized '\"CsrDbContext\"' using provider '\"Npgsql.EntityFrameworkCore.PostgreSQL\":\"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06\"' with options: \"using snake-case naming  (culture=)DetailedErrorsEnabled \"","@i":"d2805559","version":"6.0.0-rc.1.21452.10","contextType":"CsrDbContext","provider":"Npgsql.EntityFrameworkCore.PostgreSQL","providerVersion":"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06","options":"using snake-case naming  (culture=)DetailedErrorsEnabled ","EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"SourceContext":"Microsoft.EntityFrameworkCore.Infrastructure"}
{"@t":"2021-10-24T16:40:29.3961334Z","@m":"Failed executing DbCommand (\"25\"ms) [Parameters=[\"@p0='?' (DbType = Guid), @p1='?' (DbType = DateTimeOffset), @p2='?', @p3='?' (DbType = DateTimeOffset)\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"INSERT INTO csrs (id, created_at, csr, updated_at)\r\nVALUES (@p0, @p1, @p2, @p3);\"","@i":"627a98df","@l":"Error","elapsed":"25","parameters":"@p0='?' (DbType = Guid), @p1='?' (DbType = DateTimeOffset), @p2='?', @p3='?' (DbType = DateTimeOffset)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"INSERT INTO csrs (id, created_at, csr, updated_at)\r\nVALUES (@p0, @p1, @p2, @p3);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:40:29.4398023Z","@m":"User profile is available. Using '\"C:\\Users\\Michael\\AppData\\Local\\ASP.NET\\DataProtection-Keys\"' as key repository and Windows DPAPI to encrypt keys at rest.","@i":"7ac5e29c","FullName":"C:\\Users\\Michael\\AppData\\Local\\ASP.NET\\DataProtection-Keys","EventId":{"Id":63,"Name":"UsingProfileAsKeyRepositoryWithDPAPI"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}
{"@t":"2021-10-24T16:40:29.4900999Z","@m":"An exception occurred in the database while saving changes for context type '\"CsrStorage.Data.CsrDbContext\"'.\"\r\n\"\"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \\\"ix_csrs_csr\\\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|211_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23505\r\n    MessageText: duplicate key value violates unique constraint \\\"ix_csrs_csr\\\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: csrs\r\n    ConstraintName: ix_csrs_csr\r\n    File: nbtinsert.c\r\n    Line: 663\r\n    Routine: _bt_check_unique\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\"","@i":"170f029e","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|211_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23505\r\n    MessageText: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: csrs\r\n    ConstraintName: ix_csrs_csr\r\n    File: nbtinsert.c\r\n    Line: 663\r\n    Routine: _bt_check_unique\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","contextType":"CsrStorage.Data.CsrDbContext","newline":"\r\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|211_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23505\r\n    MessageText: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: csrs\r\n    ConstraintName: ix_csrs_csr\r\n    File: nbtinsert.c\r\n    Line: 663\r\n    Routine: _bt_check_unique\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update"}
{"@t":"2021-10-24T16:40:29.5028012Z","@m":"Now listening on: \"http://localhost:5003\"","@i":"d826f4b8","address":"http://localhost:5003","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:40:29.5760197Z","@m":"Application started. Press Ctrl+C to shut down.","@i":"dcaefe54","SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:40:29.5763838Z","@m":"Hosting environment: \"Development\"","@i":"c3307c92","envName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:40:29.5768096Z","@m":"Content root path: \"C:\\Users\\Michael\\RiderProjects\\CryptoMS\\CsrStorage\"","@i":"b5d60022","contentRoot":"C:\\Users\\Michael\\RiderProjects\\CryptoMS\\CsrStorage","SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:51:55.3824087Z","@m":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","@i":"ca22a1cb","Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"localhost:5003","PathBase":"","Path":"/api/v1/csr/storage","QueryString":"","HostingRequestStartingLog":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HMCN1QB1T5E1:00000002","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1QB1T5E1"}
{"@t":"2021-10-24T16:51:55.4916614Z","@m":"Executing endpoint '\"CsrStorage.Controllers.StorageController.Get (CsrStorage)\"'","@i":"500cc934","EndpointName":"CsrStorage.Controllers.StorageController.Get (CsrStorage)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HMCN1QB1T5E1:00000002","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1QB1T5E1"}
{"@t":"2021-10-24T16:51:55.5023332Z","@m":"Route matched with \"{action = \\\"Get\\\", controller = \\\"Storage\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[Shared.Communication.Responses.CsrResponse]] Get()\" on controller \"CsrStorage.Controllers.StorageController\" (\"CsrStorage\").","@i":"122b2fdf","RouteData":"{action = \"Get\", controller = \"Storage\"}","MethodInfo":"System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[Shared.Communication.Responses.CsrResponse]] Get()","Controller":"CsrStorage.Controllers.StorageController","AssemblyName":"CsrStorage","EventId":{"Id":3,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"e499f52b-ee94-4c47-8d22-5480f679a0b4","ActionName":"CsrStorage.Controllers.StorageController.Get (CsrStorage)","RequestId":"0HMCN1QB1T5E1:00000002","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1QB1T5E1"}
{"@t":"2021-10-24T16:52:23.6642722Z","@m":"Starting application...","@i":"777459a1"}
{"@t":"2021-10-24T16:52:24.2365294Z","@m":"'AddEntityFramework*' was called on the service provider, but 'UseInternalServiceProvider' wasn't called in the DbContext options configuration. Consider removing the 'AddEntityFramework*' call, as in most cases it's not needed and may cause conflicts with other products and services registered in the same service provider.","@i":"4bc25ac5","@l":"Warning","EventId":{"Id":10410,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.RedundantAddServicesCallWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Infrastructure"}
{"@t":"2021-10-24T16:52:24.6832299Z","@m":"Entity Framework Core \"6.0.0-rc.1.21452.10\" initialized '\"CsrDbContext\"' using provider '\"Npgsql.EntityFrameworkCore.PostgreSQL\":\"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06\"' with options: \"using snake-case naming  (culture=)DetailedErrorsEnabled \"","@i":"d2805559","version":"6.0.0-rc.1.21452.10","contextType":"CsrDbContext","provider":"Npgsql.EntityFrameworkCore.PostgreSQL","providerVersion":"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06","options":"using snake-case naming  (culture=)DetailedErrorsEnabled ","EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"SourceContext":"Microsoft.EntityFrameworkCore.Infrastructure"}
{"@t":"2021-10-24T16:52:24.9482511Z","@m":"Executed DbCommand (\"26\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');\"","@i":"0723d8ff","elapsed":"26","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:52:24.9666170Z","@m":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');\"","@i":"0723d8ff","elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:52:24.9824805Z","@m":"Executed DbCommand (\"3\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"SELECT migration_id, product_version\r\nFROM \\\"__EFMigrationsHistory\\\"\r\nORDER BY migration_id;\"","@i":"0723d8ff","elapsed":"3","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT migration_id, product_version\r\nFROM \"__EFMigrationsHistory\"\r\nORDER BY migration_id;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:52:24.9943626Z","@m":"No migrations were applied. The database is already up to date.","@i":"503cba9d","EventId":{"Id":20405,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationsNotApplied"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations"}
{"@t":"2021-10-24T16:52:25.3407172Z","@m":"Entity Framework Core \"6.0.0-rc.1.21452.10\" initialized '\"CsrDbContext\"' using provider '\"Npgsql.EntityFrameworkCore.PostgreSQL\":\"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06\"' with options: \"using snake-case naming  (culture=)DetailedErrorsEnabled \"","@i":"d2805559","version":"6.0.0-rc.1.21452.10","contextType":"CsrDbContext","provider":"Npgsql.EntityFrameworkCore.PostgreSQL","providerVersion":"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06","options":"using snake-case naming  (culture=)DetailedErrorsEnabled ","EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"SourceContext":"Microsoft.EntityFrameworkCore.Infrastructure"}
{"@t":"2021-10-24T16:52:25.4726291Z","@m":"Failed executing DbCommand (\"23\"ms) [Parameters=[\"@p0='?' (DbType = Guid), @p1='?' (DbType = DateTimeOffset), @p2='?', @p3='?' (DbType = DateTimeOffset)\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"INSERT INTO csrs (id, created_at, csr, updated_at)\r\nVALUES (@p0, @p1, @p2, @p3);\"","@i":"627a98df","@l":"Error","elapsed":"23","parameters":"@p0='?' (DbType = Guid), @p1='?' (DbType = DateTimeOffset), @p2='?', @p3='?' (DbType = DateTimeOffset)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"INSERT INTO csrs (id, created_at, csr, updated_at)\r\nVALUES (@p0, @p1, @p2, @p3);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:52:25.5644222Z","@m":"User profile is available. Using '\"C:\\Users\\Michael\\AppData\\Local\\ASP.NET\\DataProtection-Keys\"' as key repository and Windows DPAPI to encrypt keys at rest.","@i":"7ac5e29c","FullName":"C:\\Users\\Michael\\AppData\\Local\\ASP.NET\\DataProtection-Keys","EventId":{"Id":63,"Name":"UsingProfileAsKeyRepositoryWithDPAPI"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}
{"@t":"2021-10-24T16:52:25.5655069Z","@m":"An exception occurred in the database while saving changes for context type '\"CsrStorage.Data.CsrDbContext\"'.\"\r\n\"\"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \\\"ix_csrs_csr\\\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|211_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23505\r\n    MessageText: duplicate key value violates unique constraint \\\"ix_csrs_csr\\\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: csrs\r\n    ConstraintName: ix_csrs_csr\r\n    File: nbtinsert.c\r\n    Line: 663\r\n    Routine: _bt_check_unique\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\"","@i":"170f029e","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|211_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23505\r\n    MessageText: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: csrs\r\n    ConstraintName: ix_csrs_csr\r\n    File: nbtinsert.c\r\n    Line: 663\r\n    Routine: _bt_check_unique\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","contextType":"CsrStorage.Data.CsrDbContext","newline":"\r\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|211_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23505\r\n    MessageText: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: csrs\r\n    ConstraintName: ix_csrs_csr\r\n    File: nbtinsert.c\r\n    Line: 663\r\n    Routine: _bt_check_unique\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update"}
{"@t":"2021-10-24T16:52:25.7208535Z","@m":"Now listening on: \"http://localhost:5003\"","@i":"d826f4b8","address":"http://localhost:5003","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:52:25.7429561Z","@m":"Application started. Press Ctrl+C to shut down.","@i":"dcaefe54","SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:52:25.7432722Z","@m":"Hosting environment: \"Development\"","@i":"c3307c92","envName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:52:25.7434748Z","@m":"Content root path: \"C:\\Users\\Michael\\RiderProjects\\CryptoMS\\CsrStorage\"","@i":"b5d60022","contentRoot":"C:\\Users\\Michael\\RiderProjects\\CryptoMS\\CsrStorage","SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:53:11.6816323Z","@m":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","@i":"ca22a1cb","Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"localhost:5003","PathBase":"","Path":"/api/v1/csr/storage","QueryString":"","HostingRequestStartingLog":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HMCN1R1PHCEF:00000002","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1R1PHCEF"}
{"@t":"2021-10-24T16:53:11.8014770Z","@m":"Executing endpoint '\"CsrStorage.Controllers.StorageController.Get (CsrStorage)\"'","@i":"500cc934","EndpointName":"CsrStorage.Controllers.StorageController.Get (CsrStorage)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HMCN1R1PHCEF:00000002","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1R1PHCEF"}
{"@t":"2021-10-24T16:53:11.8107843Z","@m":"Route matched with \"{action = \\\"Get\\\", controller = \\\"Storage\\\"}\". Executing controller action with signature \"System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[Shared.Communication.Responses.CsrResponse]] Get()\" on controller \"CsrStorage.Controllers.StorageController\" (\"CsrStorage\").","@i":"122b2fdf","RouteData":"{action = \"Get\", controller = \"Storage\"}","MethodInfo":"System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[Shared.Communication.Responses.CsrResponse]] Get()","Controller":"CsrStorage.Controllers.StorageController","AssemblyName":"CsrStorage","EventId":{"Id":3,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"e0d7b842-0a64-46d1-9063-1da4ce7da1ad","ActionName":"CsrStorage.Controllers.StorageController.Get (CsrStorage)","RequestId":"0HMCN1R1PHCEF:00000002","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1R1PHCEF"}
{"@t":"2021-10-24T16:53:30.8966246Z","@m":"Starting application...","@i":"777459a1"}
{"@t":"2021-10-24T16:53:31.3775826Z","@m":"'AddEntityFramework*' was called on the service provider, but 'UseInternalServiceProvider' wasn't called in the DbContext options configuration. Consider removing the 'AddEntityFramework*' call, as in most cases it's not needed and may cause conflicts with other products and services registered in the same service provider.","@i":"4bc25ac5","@l":"Warning","EventId":{"Id":10410,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.RedundantAddServicesCallWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Infrastructure"}
{"@t":"2021-10-24T16:53:31.8522701Z","@m":"Entity Framework Core \"6.0.0-rc.1.21452.10\" initialized '\"CsrDbContext\"' using provider '\"Npgsql.EntityFrameworkCore.PostgreSQL\":\"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06\"' with options: \"using snake-case naming  (culture=)DetailedErrorsEnabled \"","@i":"d2805559","version":"6.0.0-rc.1.21452.10","contextType":"CsrDbContext","provider":"Npgsql.EntityFrameworkCore.PostgreSQL","providerVersion":"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06","options":"using snake-case naming  (culture=)DetailedErrorsEnabled ","EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"SourceContext":"Microsoft.EntityFrameworkCore.Infrastructure"}
{"@t":"2021-10-24T16:53:32.1518562Z","@m":"Executed DbCommand (\"29\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');\"","@i":"0723d8ff","elapsed":"29","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:53:32.1698725Z","@m":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');\"","@i":"0723d8ff","elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:53:32.1867553Z","@m":"Executed DbCommand (\"3\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"SELECT migration_id, product_version\r\nFROM \\\"__EFMigrationsHistory\\\"\r\nORDER BY migration_id;\"","@i":"0723d8ff","elapsed":"3","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT migration_id, product_version\r\nFROM \"__EFMigrationsHistory\"\r\nORDER BY migration_id;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:53:32.1988888Z","@m":"No migrations were applied. The database is already up to date.","@i":"503cba9d","EventId":{"Id":20405,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationsNotApplied"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations"}
{"@t":"2021-10-24T16:53:32.5389500Z","@m":"Entity Framework Core \"6.0.0-rc.1.21452.10\" initialized '\"CsrDbContext\"' using provider '\"Npgsql.EntityFrameworkCore.PostgreSQL\":\"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06\"' with options: \"using snake-case naming  (culture=)DetailedErrorsEnabled \"","@i":"d2805559","version":"6.0.0-rc.1.21452.10","contextType":"CsrDbContext","provider":"Npgsql.EntityFrameworkCore.PostgreSQL","providerVersion":"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06","options":"using snake-case naming  (culture=)DetailedErrorsEnabled ","EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"SourceContext":"Microsoft.EntityFrameworkCore.Infrastructure"}
{"@t":"2021-10-24T16:53:32.6846043Z","@m":"Failed executing DbCommand (\"26\"ms) [Parameters=[\"@p0='?' (DbType = Guid), @p1='?' (DbType = DateTimeOffset), @p2='?', @p3='?' (DbType = DateTimeOffset)\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"INSERT INTO csrs (id, created_at, csr, updated_at)\r\nVALUES (@p0, @p1, @p2, @p3);\"","@i":"627a98df","@l":"Error","elapsed":"26","parameters":"@p0='?' (DbType = Guid), @p1='?' (DbType = DateTimeOffset), @p2='?', @p3='?' (DbType = DateTimeOffset)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"INSERT INTO csrs (id, created_at, csr, updated_at)\r\nVALUES (@p0, @p1, @p2, @p3);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:53:32.7444317Z","@m":"User profile is available. Using '\"C:\\Users\\Michael\\AppData\\Local\\ASP.NET\\DataProtection-Keys\"' as key repository and Windows DPAPI to encrypt keys at rest.","@i":"7ac5e29c","FullName":"C:\\Users\\Michael\\AppData\\Local\\ASP.NET\\DataProtection-Keys","EventId":{"Id":63,"Name":"UsingProfileAsKeyRepositoryWithDPAPI"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}
{"@t":"2021-10-24T16:53:32.8199954Z","@m":"An exception occurred in the database while saving changes for context type '\"CsrStorage.Data.CsrDbContext\"'.\"\r\n\"\"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \\\"ix_csrs_csr\\\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|211_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23505\r\n    MessageText: duplicate key value violates unique constraint \\\"ix_csrs_csr\\\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: csrs\r\n    ConstraintName: ix_csrs_csr\r\n    File: nbtinsert.c\r\n    Line: 663\r\n    Routine: _bt_check_unique\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\"","@i":"170f029e","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|211_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23505\r\n    MessageText: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: csrs\r\n    ConstraintName: ix_csrs_csr\r\n    File: nbtinsert.c\r\n    Line: 663\r\n    Routine: _bt_check_unique\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","contextType":"CsrStorage.Data.CsrDbContext","newline":"\r\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|211_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23505\r\n    MessageText: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: csrs\r\n    ConstraintName: ix_csrs_csr\r\n    File: nbtinsert.c\r\n    Line: 663\r\n    Routine: _bt_check_unique\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update"}
{"@t":"2021-10-24T16:53:32.8250953Z","@m":"Now listening on: \"http://localhost:5003\"","@i":"d826f4b8","address":"http://localhost:5003","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:53:32.9257350Z","@m":"Application started. Press Ctrl+C to shut down.","@i":"dcaefe54","SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:53:32.9261288Z","@m":"Hosting environment: \"Development\"","@i":"c3307c92","envName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:53:32.9266074Z","@m":"Content root path: \"C:\\Users\\Michael\\RiderProjects\\CryptoMS\\CsrStorage\"","@i":"b5d60022","contentRoot":"C:\\Users\\Michael\\RiderProjects\\CryptoMS\\CsrStorage","SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:54:42.1768013Z","@m":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","@i":"ca22a1cb","Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"localhost:5003","PathBase":"","Path":"/api/v1/csr/storage","QueryString":"","HostingRequestStartingLog":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HMCN1RSOJC21:00000002","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:54:42.2164306Z","@m":"Authorization failed. \"These requirements were not met:\r\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.\"","@i":"92d7f7d3","Reason":"These requirements were not met:\r\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.","EventId":{"Id":2,"Name":"UserAuthorizationFailed"},"SourceContext":"Microsoft.AspNetCore.Authorization.DefaultAuthorizationService","RequestId":"0HMCN1RSOJC21:00000002","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:54:42.2896939Z","@m":"AuthenticationScheme: \"Bearer\" was challenged.","@i":"d45f1f38","AuthenticationScheme":"Bearer","EventId":{"Id":12,"Name":"AuthenticationSchemeChallenged"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HMCN1RSOJC21:00000002","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:54:42.3022642Z","@m":"Request finished HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - - - 401 0 - 126.5922ms","@i":"791a596a","ElapsedMilliseconds":126.5922,"StatusCode":401,"ContentType":null,"ContentLength":0,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"localhost:5003","PathBase":"","Path":"/api/v1/csr/storage","QueryString":"","HostingRequestFinishedLog":"Request finished HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - - - 401 0 - 126.5922ms","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HMCN1RSOJC21:00000002","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:55:25.0772390Z","@m":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","@i":"ca22a1cb","Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"localhost:5003","PathBase":"","Path":"/api/v1/csr/storage","QueryString":"","HostingRequestStartingLog":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HMCN1RSOJC21:00000003","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:55:25.0783647Z","@m":"Authorization failed. \"These requirements were not met:\r\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.\"","@i":"92d7f7d3","Reason":"These requirements were not met:\r\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.","EventId":{"Id":2,"Name":"UserAuthorizationFailed"},"SourceContext":"Microsoft.AspNetCore.Authorization.DefaultAuthorizationService","RequestId":"0HMCN1RSOJC21:00000003","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:55:25.2765343Z","@m":"AuthenticationScheme: \"Bearer\" was challenged.","@i":"d45f1f38","AuthenticationScheme":"Bearer","EventId":{"Id":12,"Name":"AuthenticationSchemeChallenged"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HMCN1RSOJC21:00000003","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:55:25.2770328Z","@m":"Request finished HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - - - 401 0 - 199.8690ms","@i":"791a596a","ElapsedMilliseconds":199.869,"StatusCode":401,"ContentType":null,"ContentLength":0,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"localhost:5003","PathBase":"","Path":"/api/v1/csr/storage","QueryString":"","HostingRequestFinishedLog":"Request finished HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - - - 401 0 - 199.8690ms","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HMCN1RSOJC21:00000003","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:55:42.4410716Z","@m":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","@i":"ca22a1cb","Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"localhost:5003","PathBase":"","Path":"/api/v1/csr/storage","QueryString":"","HostingRequestStartingLog":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HMCN1RSOJC21:00000004","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:55:42.4418361Z","@m":"Authorization failed. \"These requirements were not met:\r\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.\"","@i":"92d7f7d3","Reason":"These requirements were not met:\r\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.","EventId":{"Id":2,"Name":"UserAuthorizationFailed"},"SourceContext":"Microsoft.AspNetCore.Authorization.DefaultAuthorizationService","RequestId":"0HMCN1RSOJC21:00000004","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:55:42.4429873Z","@m":"AuthenticationScheme: \"Bearer\" was challenged.","@i":"d45f1f38","AuthenticationScheme":"Bearer","EventId":{"Id":12,"Name":"AuthenticationSchemeChallenged"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HMCN1RSOJC21:00000004","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:55:42.4431998Z","@m":"Request finished HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - - - 401 0 - 2.2110ms","@i":"791a596a","ElapsedMilliseconds":2.211,"StatusCode":401,"ContentType":null,"ContentLength":0,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"localhost:5003","PathBase":"","Path":"/api/v1/csr/storage","QueryString":"","HostingRequestFinishedLog":"Request finished HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - - - 401 0 - 2.2110ms","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HMCN1RSOJC21:00000004","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:55:43.1390924Z","@m":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","@i":"ca22a1cb","Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"localhost:5003","PathBase":"","Path":"/api/v1/csr/storage","QueryString":"","HostingRequestStartingLog":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HMCN1RSOJC21:00000005","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:55:43.1395470Z","@m":"Authorization failed. \"These requirements were not met:\r\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.\"","@i":"92d7f7d3","Reason":"These requirements were not met:\r\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.","EventId":{"Id":2,"Name":"UserAuthorizationFailed"},"SourceContext":"Microsoft.AspNetCore.Authorization.DefaultAuthorizationService","RequestId":"0HMCN1RSOJC21:00000005","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:55:43.1399452Z","@m":"AuthenticationScheme: \"Bearer\" was challenged.","@i":"d45f1f38","AuthenticationScheme":"Bearer","EventId":{"Id":12,"Name":"AuthenticationSchemeChallenged"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HMCN1RSOJC21:00000005","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:55:43.1401764Z","@m":"Request finished HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - - - 401 0 - 1.1249ms","@i":"791a596a","ElapsedMilliseconds":1.1249,"StatusCode":401,"ContentType":null,"ContentLength":0,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"localhost:5003","PathBase":"","Path":"/api/v1/csr/storage","QueryString":"","HostingRequestFinishedLog":"Request finished HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - - - 401 0 - 1.1249ms","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HMCN1RSOJC21:00000005","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:55:43.6430500Z","@m":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","@i":"ca22a1cb","Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"localhost:5003","PathBase":"","Path":"/api/v1/csr/storage","QueryString":"","HostingRequestStartingLog":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HMCN1RSOJC21:00000006","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:55:43.6437553Z","@m":"Authorization failed. \"These requirements were not met:\r\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.\"","@i":"92d7f7d3","Reason":"These requirements were not met:\r\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.","EventId":{"Id":2,"Name":"UserAuthorizationFailed"},"SourceContext":"Microsoft.AspNetCore.Authorization.DefaultAuthorizationService","RequestId":"0HMCN1RSOJC21:00000006","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:55:43.6444061Z","@m":"AuthenticationScheme: \"Bearer\" was challenged.","@i":"d45f1f38","AuthenticationScheme":"Bearer","EventId":{"Id":12,"Name":"AuthenticationSchemeChallenged"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HMCN1RSOJC21:00000006","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:55:43.6447363Z","@m":"Request finished HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - - - 401 0 - 1.7489ms","@i":"791a596a","ElapsedMilliseconds":1.7489,"StatusCode":401,"ContentType":null,"ContentLength":0,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"localhost:5003","PathBase":"","Path":"/api/v1/csr/storage","QueryString":"","HostingRequestFinishedLog":"Request finished HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - - - 401 0 - 1.7489ms","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HMCN1RSOJC21:00000006","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1RSOJC21"}
{"@t":"2021-10-24T16:56:40.2197532Z","@m":"Starting application...","@i":"777459a1"}
{"@t":"2021-10-24T16:56:40.7207816Z","@m":"'AddEntityFramework*' was called on the service provider, but 'UseInternalServiceProvider' wasn't called in the DbContext options configuration. Consider removing the 'AddEntityFramework*' call, as in most cases it's not needed and may cause conflicts with other products and services registered in the same service provider.","@i":"4bc25ac5","@l":"Warning","EventId":{"Id":10410,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.RedundantAddServicesCallWarning"},"SourceContext":"Microsoft.EntityFrameworkCore.Infrastructure"}
{"@t":"2021-10-24T16:56:41.2318838Z","@m":"Entity Framework Core \"6.0.0-rc.1.21452.10\" initialized '\"CsrDbContext\"' using provider '\"Npgsql.EntityFrameworkCore.PostgreSQL\":\"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06\"' with options: \"using snake-case naming  (culture=)DetailedErrorsEnabled \"","@i":"d2805559","version":"6.0.0-rc.1.21452.10","contextType":"CsrDbContext","provider":"Npgsql.EntityFrameworkCore.PostgreSQL","providerVersion":"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06","options":"using snake-case naming  (culture=)DetailedErrorsEnabled ","EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"SourceContext":"Microsoft.EntityFrameworkCore.Infrastructure"}
{"@t":"2021-10-24T16:56:41.4995581Z","@m":"Executed DbCommand (\"29\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');\"","@i":"0723d8ff","elapsed":"29","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:56:41.5188118Z","@m":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');\"","@i":"0723d8ff","elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT EXISTS (SELECT 1 FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace WHERE c.relname='__EFMigrationsHistory');","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:56:41.5352689Z","@m":"Executed DbCommand (\"2\"ms) [Parameters=[\"\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"SELECT migration_id, product_version\r\nFROM \\\"__EFMigrationsHistory\\\"\r\nORDER BY migration_id;\"","@i":"0723d8ff","elapsed":"2","parameters":"","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SELECT migration_id, product_version\r\nFROM \"__EFMigrationsHistory\"\r\nORDER BY migration_id;","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:56:41.5458461Z","@m":"No migrations were applied. The database is already up to date.","@i":"503cba9d","EventId":{"Id":20405,"Name":"Microsoft.EntityFrameworkCore.Migrations.MigrationsNotApplied"},"SourceContext":"Microsoft.EntityFrameworkCore.Migrations"}
{"@t":"2021-10-24T16:56:41.9114719Z","@m":"Entity Framework Core \"6.0.0-rc.1.21452.10\" initialized '\"CsrDbContext\"' using provider '\"Npgsql.EntityFrameworkCore.PostgreSQL\":\"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06\"' with options: \"using snake-case naming  (culture=)DetailedErrorsEnabled \"","@i":"d2805559","version":"6.0.0-rc.1.21452.10","contextType":"CsrDbContext","provider":"Npgsql.EntityFrameworkCore.PostgreSQL","providerVersion":"6.0.0-rc.1+d23c7264d0226d8420e1bb013415356957622a06","options":"using snake-case naming  (culture=)DetailedErrorsEnabled ","EventId":{"Id":10403,"Name":"Microsoft.EntityFrameworkCore.Infrastructure.ContextInitialized"},"SourceContext":"Microsoft.EntityFrameworkCore.Infrastructure"}
{"@t":"2021-10-24T16:56:42.0539412Z","@m":"Failed executing DbCommand (\"27\"ms) [Parameters=[\"@p0='?' (DbType = Guid), @p1='?' (DbType = DateTimeOffset), @p2='?', @p3='?' (DbType = DateTimeOffset)\"], CommandType='Text', CommandTimeout='30']\"\r\n\"\"INSERT INTO csrs (id, created_at, csr, updated_at)\r\nVALUES (@p0, @p1, @p2, @p3);\"","@i":"627a98df","@l":"Error","elapsed":"27","parameters":"@p0='?' (DbType = Guid), @p1='?' (DbType = DateTimeOffset), @p2='?', @p3='?' (DbType = DateTimeOffset)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"INSERT INTO csrs (id, created_at, csr, updated_at)\r\nVALUES (@p0, @p1, @p2, @p3);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
{"@t":"2021-10-24T16:56:42.1004607Z","@m":"User profile is available. Using '\"C:\\Users\\Michael\\AppData\\Local\\ASP.NET\\DataProtection-Keys\"' as key repository and Windows DPAPI to encrypt keys at rest.","@i":"7ac5e29c","FullName":"C:\\Users\\Michael\\AppData\\Local\\ASP.NET\\DataProtection-Keys","EventId":{"Id":63,"Name":"UsingProfileAsKeyRepositoryWithDPAPI"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}
{"@t":"2021-10-24T16:56:42.1572157Z","@m":"An exception occurred in the database while saving changes for context type '\"CsrStorage.Data.CsrDbContext\"'.\"\r\n\"\"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \\\"ix_csrs_csr\\\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|211_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23505\r\n    MessageText: duplicate key value violates unique constraint \\\"ix_csrs_csr\\\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: csrs\r\n    ConstraintName: ix_csrs_csr\r\n    File: nbtinsert.c\r\n    Line: 663\r\n    Routine: _bt_check_unique\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\"","@i":"170f029e","@l":"Error","@x":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|211_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23505\r\n    MessageText: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: csrs\r\n    ConstraintName: ix_csrs_csr\r\n    File: nbtinsert.c\r\n    Line: 663\r\n    Routine: _bt_check_unique\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","contextType":"CsrStorage.Data.CsrDbContext","newline":"\r\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\r\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n\r\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|211_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\r\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)\r\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n  Exception data:\r\n    Severity: ERROR\r\n    SqlState: 23505\r\n    MessageText: duplicate key value violates unique constraint \"ix_csrs_csr\"\r\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\r\n    SchemaName: public\r\n    TableName: csrs\r\n    ConstraintName: ix_csrs_csr\r\n    File: nbtinsert.c\r\n    Line: 663\r\n    Routine: _bt_check_unique\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update"}
{"@t":"2021-10-24T16:56:42.1645134Z","@m":"Now listening on: \"http://localhost:5003\"","@i":"d826f4b8","address":"http://localhost:5003","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:56:42.2445166Z","@m":"Application started. Press Ctrl+C to shut down.","@i":"dcaefe54","SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:56:42.2448777Z","@m":"Hosting environment: \"Development\"","@i":"c3307c92","envName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:56:42.2450911Z","@m":"Content root path: \"C:\\Users\\Michael\\RiderProjects\\CryptoMS\\CsrStorage\"","@i":"b5d60022","contentRoot":"C:\\Users\\Michael\\RiderProjects\\CryptoMS\\CsrStorage","SourceContext":"Microsoft.Hosting.Lifetime"}
{"@t":"2021-10-24T16:56:52.1858263Z","@m":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","@i":"ca22a1cb","Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"localhost:5003","PathBase":"","Path":"/api/v1/csr/storage","QueryString":"","HostingRequestStartingLog":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HMCN1T3GF9DI:00000002","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1T3GF9DI"}
{"@t":"2021-10-24T16:56:52.2317837Z","@m":"Authorization failed. \"These requirements were not met:\r\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.\"","@i":"92d7f7d3","Reason":"These requirements were not met:\r\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.","EventId":{"Id":2,"Name":"UserAuthorizationFailed"},"SourceContext":"Microsoft.AspNetCore.Authorization.DefaultAuthorizationService","RequestId":"0HMCN1T3GF9DI:00000002","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1T3GF9DI"}
{"@t":"2021-10-24T16:56:52.4386346Z","@m":"AuthenticationScheme: \"Bearer\" was challenged.","@i":"d45f1f38","AuthenticationScheme":"Bearer","EventId":{"Id":12,"Name":"AuthenticationSchemeChallenged"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HMCN1T3GF9DI:00000002","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1T3GF9DI"}
{"@t":"2021-10-24T16:56:52.4506747Z","@m":"Request finished HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - - - 401 0 - 265.7979ms","@i":"791a596a","ElapsedMilliseconds":265.7979,"StatusCode":401,"ContentType":null,"ContentLength":0,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"localhost:5003","PathBase":"","Path":"/api/v1/csr/storage","QueryString":"","HostingRequestFinishedLog":"Request finished HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - - - 401 0 - 265.7979ms","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HMCN1T3GF9DI:00000002","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1T3GF9DI"}
{"@t":"2021-10-24T16:57:37.6860631Z","@m":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","@i":"ca22a1cb","Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"localhost:5003","PathBase":"","Path":"/api/v1/csr/storage","QueryString":"","HostingRequestStartingLog":"Request starting HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - -","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HMCN1T3GF9DI:00000003","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1T3GF9DI"}
{"@t":"2021-10-24T16:57:37.6872226Z","@m":"Authorization failed. \"These requirements were not met:\r\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.\"","@i":"92d7f7d3","Reason":"These requirements were not met:\r\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.","EventId":{"Id":2,"Name":"UserAuthorizationFailed"},"SourceContext":"Microsoft.AspNetCore.Authorization.DefaultAuthorizationService","RequestId":"0HMCN1T3GF9DI:00000003","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1T3GF9DI"}
{"@t":"2021-10-24T16:57:37.6918598Z","@m":"AuthenticationScheme: \"Bearer\" was challenged.","@i":"d45f1f38","AuthenticationScheme":"Bearer","EventId":{"Id":12,"Name":"AuthenticationSchemeChallenged"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HMCN1T3GF9DI:00000003","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1T3GF9DI"}
{"@t":"2021-10-24T16:57:37.6926643Z","@m":"Request finished HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - - - 401 0 - 6.6689ms","@i":"791a596a","ElapsedMilliseconds":6.6689,"StatusCode":401,"ContentType":null,"ContentLength":0,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"localhost:5003","PathBase":"","Path":"/api/v1/csr/storage","QueryString":"","HostingRequestFinishedLog":"Request finished HTTP/1.1 GET http://localhost:5003/api/v1/csr/storage - - - 401 0 - 6.6689ms","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HMCN1T3GF9DI:00000003","RequestPath":"/api/v1/csr/storage","ConnectionId":"0HMCN1T3GF9DI"}
